name: Publish and release

on: 
    workflow_dispatch:
        inputs:
            version:
                description: "Version bump type"
                required: true
                default: "patch"
                type: choice
                options:
                    - patch
                    - minor
                    - major

jobs:
    publish:
        runs-on: ubuntu-latest

        steps:
            - name: Checkout repository
              uses: actions/checkout@v5
            - name: Setup node
              uses: actions/setup-node@v4
              with:
                node-version: '22'
                registry-url: https://registry.npmjs.org/
            - name: Verify npm auth
              run: npm whoami
              env:
                NODE_AUTH_TOKEN: ${{ secrets.NPM_TOKEN }}

